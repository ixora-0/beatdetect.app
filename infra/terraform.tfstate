{"version":4,"terraform_version":"1.10.6","serial":11,"lineage":"5b425d3d-5cc6-6c05-8f51-eee64fbc4110","outputs":{},"resources":[{"mode":"data","type":"cloudflare_zone","name":"main","provider":"provider[\"registry.opentofu.org/cloudflare/cloudflare\"]","instances":[{"schema_version":0,"attributes":{"account_id":"08f69ca7b45c9bb380a28b194f0abea9","id":"3a8261236a44420f21075ce411064c64","name":"beatdetect.app","name_servers":["cody.ns.cloudflare.com","ivy.ns.cloudflare.com"],"paused":false,"plan":"Free Website","status":"active","vanity_name_servers":[],"zone_id":"3a8261236a44420f21075ce411064c64"},"sensitive_attributes":[[{"type":"get_attr","value":"zone_id"}]]}]},{"mode":"data","type":"cloudflare_zones","name":"myzone","provider":"provider[\"registry.opentofu.org/cloudflare/cloudflare\"]","instances":[{"schema_version":0,"attributes":{"filter":[{"account_id":"","lookup_type":"exact","match":"","name":"beatdetect.app","paused":false,"status":""}],"id":"d0887182a2a1c94e6f293cd60ae839d3","zones":[{"id":"3a8261236a44420f21075ce411064c64","name":"beatdetect.app"}]},"sensitive_attributes":[]}]},{"mode":"managed","type":"cloudflare_record","name":"site","provider":"provider[\"registry.opentofu.org/cloudflare/cloudflare\"]","instances":[{"schema_version":2,"attributes":{"allow_overwrite":false,"comment":"","created_on":"2025-12-04T07:20:39.153582Z","data":[],"hostname":"beatdetect.app","id":"8c4b9adfbf77de57a7a873eb983be2d2","metadata":{},"modified_on":"2025-12-04T07:20:39.153582Z","name":"@","priority":null,"proxiable":true,"proxied":true,"tags":[],"timeouts":null,"ttl":1,"type":"CNAME","value":"storage.googleapis.com","zone_id":"3a8261236a44420f21075ce411064c64"},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMCwidXBkYXRlIjozMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMiJ9","dependencies":["data.cloudflare_zone.main"]}]},{"mode":"managed","type":"cloudflare_worker_route","name":"route","provider":"provider[\"registry.opentofu.org/cloudflare/cloudflare\"]","instances":[{"schema_version":0,"attributes":{"id":"67479e5c94dc4ec18c49599e52fd625b","pattern":"beatdetect.app/*","script_name":"gcs-router","zone_id":"3a8261236a44420f21075ce411064c64"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["cloudflare_worker_script.gcs_router","data.cloudflare_zone.main"]}]},{"mode":"managed","type":"cloudflare_worker_script","name":"gcs_router","provider":"provider[\"registry.opentofu.org/cloudflare/cloudflare\"]","instances":[{"schema_version":0,"attributes":{"account_id":"08f69ca7b45c9bb380a28b194f0abea9","analytics_engine_binding":[],"compatibility_date":null,"compatibility_flags":[],"content":"async function handleRequest(request) {\n  const url = new URL(request.url);\n  const path = url.pathname === \"/\" ? \"/index.html\" : url.pathname;\n\n  const gcs = \"https://storage.googleapis.com/beatdetect-app-site\" + path;\n\n  return fetch(gcs, {\n    headers: {\n      \"Cache-Control\": \"public, max-age=3600\"\n    }\n  });\n}\n\naddEventListener(\"fetch\", event =\u003e {\n  event.respondWith(handleRequest(event.request));\n});\n","d1_database_binding":[],"dispatch_namespace":null,"id":"gcs-router","kv_namespace_binding":[],"logpush":null,"module":null,"name":"gcs-router","placement":[],"plain_text_binding":[],"queue_binding":[],"r2_bucket_binding":[],"secret_text_binding":[],"service_binding":[],"tags":[],"webassembly_binding":[]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["data.cloudflare_zone.main"]}]},{"mode":"managed","type":"google_storage_bucket","name":"artifacts","provider":"provider[\"registry.opentofu.org/hashicorp/google\"]","instances":[{"schema_version":4,"attributes":{"autoclass":[],"cors":[{"max_age_seconds":3600,"method":["GET","HEAD"],"origin":["*"],"response_header":["Content-Type"]}],"custom_placement_config":[],"default_event_based_hold":false,"effective_labels":{"goog-terraform-provisioned":"true"},"enable_object_retention":false,"encryption":[],"force_destroy":true,"hierarchical_namespace":[{"enabled":false}],"id":"beatdetect-app-artifacts","ip_filter":[],"labels":{},"lifecycle_rule":[],"location":"US-CENTRAL1","logging":[],"name":"beatdetect-app-artifacts","project":"beat-detect","project_number":8372031992,"public_access_prevention":"inherited","requester_pays":false,"retention_policy":[],"rpo":null,"self_link":"https://www.googleapis.com/storage/v1/b/beatdetect-app-artifacts","soft_delete_policy":[{"effective_time":"2025-12-03T13:49:43.298Z","retention_duration_seconds":604800}],"storage_class":"STANDARD","terraform_labels":{"goog-terraform-provisioned":"true"},"time_created":"2025-12-03T13:49:43.298Z","timeouts":null,"uniform_bucket_level_access":true,"updated":"2025-12-03T13:49:44.631Z","url":"gs://beatdetect-app-artifacts","versioning":[{"enabled":true}],"website":[]},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsInJlYWQiOjI0MDAwMDAwMDAwMCwidXBkYXRlIjoyNDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjQifQ=="}]},{"mode":"managed","type":"google_storage_bucket","name":"site","provider":"provider[\"registry.opentofu.org/hashicorp/google\"]","instances":[{"schema_version":4,"attributes":{"autoclass":[],"cors":[],"custom_placement_config":[],"default_event_based_hold":false,"effective_labels":{"goog-terraform-provisioned":"true"},"enable_object_retention":false,"encryption":[],"force_destroy":true,"hierarchical_namespace":[{"enabled":false}],"id":"beatdetect-app-site","ip_filter":[],"labels":{},"lifecycle_rule":[],"location":"US-CENTRAL1","logging":[],"name":"beatdetect-app-site","project":"beat-detect","project_number":8372031992,"public_access_prevention":"inherited","requester_pays":false,"retention_policy":[],"rpo":null,"self_link":"https://www.googleapis.com/storage/v1/b/beatdetect-app-site","soft_delete_policy":[{"effective_time":"2025-12-04T07:16:17.392Z","retention_duration_seconds":604800}],"storage_class":"STANDARD","terraform_labels":{"goog-terraform-provisioned":"true"},"time_created":"2025-12-04T07:16:17.392Z","timeouts":null,"uniform_bucket_level_access":true,"updated":"2025-12-04T07:27:21.753Z","url":"gs://beatdetect-app-site","versioning":[],"website":[{"main_page_suffix":"index.html","not_found_page":"404.html"}]},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsInJlYWQiOjI0MDAwMDAwMDAwMCwidXBkYXRlIjoyNDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjQifQ=="}]},{"mode":"managed","type":"google_storage_bucket_iam_binding","name":"public_read","provider":"provider[\"registry.opentofu.org/hashicorp/google\"]","instances":[{"schema_version":0,"attributes":{"bucket":"b/beatdetect-app-artifacts","condition":[],"etag":"CAI=","id":"b/beatdetect-app-artifacts/roles/storage.objectViewer","members":["allUsers"],"role":"roles/storage.objectViewer","timeouts":null},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwfX0=","dependencies":["google_storage_bucket.artifacts"]}]},{"mode":"managed","type":"google_storage_bucket_iam_member","name":"public_viewer","provider":"provider[\"registry.opentofu.org/hashicorp/google\"]","instances":[{"schema_version":0,"attributes":{"bucket":"b/beatdetect-app-site","condition":[],"etag":"CAU=","id":"b/beatdetect-app-site/roles/storage.objectViewer/allUsers","member":"allUsers","role":"roles/storage.objectViewer","timeouts":null},"sensitive_attributes":[],"private":"eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwfX0=","dependencies":["google_storage_bucket.site"]}]}],"check_results":null}
